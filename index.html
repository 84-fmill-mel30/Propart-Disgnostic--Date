<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPART V12 | HIGH-END DIAGNOSTIC</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        :root {
            --neon-blue: #00d4ff;
            --neon-green: #39ff14;
            --neon-pink: #ff007f;
            --glass: rgba(11, 14, 20, 0.95);
        }

        body {
            background: #000; /* Fondo negro profundo */
            color: #fff;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            overflow: hidden;
            height: 100vh;
        }

        /* --- PORTADA DE ALTA GAMA --- */
        #intro-screen {
            position: fixed;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1a232e 0%, #000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            transition: opacity 0.8s ease;
        }

        .btn-main-connect {
            padding: 25px 60px;
            font-size: 1.5rem;
            background: transparent;
            color: var(--neon-green);
            border: 2px solid var(--neon-green);
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(57, 255, 20, 0.2);
            transition: all 0.4s;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .btn-main-connect:hover {
            background: var(--neon-green);
            color: #000;
            box-shadow: 0 0 50px var(--neon-green);
            transform: scale(1.05);
        }

        /* --- DASHBOARD (OCULTO AL INICIO) --- */
        #dashboard-ui {
            display: none; /* Se activa al conectar */
            grid-template-columns: 320px 1fr 350px;
            gap: 15px;
            padding: 15px;
            height: 100vh;
            box-sizing: border-box;
        }

        .panel {
            background: var(--glass);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .btn-tool {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-tool:hover { background: var(--neon-blue); color: #000; }

        #live-graph { flex-grow: 1; margin-top: 15px; border-radius: 10px; overflow: hidden; }

        .metric-box {
            background: #000;
            border-left: 4px solid var(--neon-pink);
            padding: 15px;
            margin-bottom: 10px;
        }

        .console-log {
            background: #050505;
            color: var(--neon-green);
            font-family: monospace;
            font-size: 11px;
            padding: 10px;
            height: 100px;
            overflow-y: auto;
            border: 1px solid #222;
        }
    </style>
</head>
<body>

<div id="intro-screen">
    <h1 style="letter-spacing: 10px; color: var(--neon-blue);">PROPART V12</h1>
    <p style="color: #666; margin-top: -15px;">ADVANCED PREDICTIVE DIAGNOSTICS</p>
    <button class="btn-main-connect" onclick="activateSystem()">Conectar Escáner</button>
</div>

<div id="dashboard-ui">
    <div class="panel">
        <h3 style="color: var(--neon-blue); margin-top: 0;">MENÚ PRINCIPAL</h3>
        <button class="btn-tool" onclick="runScan()">Scanner V-Link</button>
        <button class="btn-tool" onclick="viewSensors()">Sensores (Live)</button>
        <button class="btn-tool" onclick="runTBA()">Calibrar TBA</button>
        <button class="btn-tool">Sincro CKP/CMP</button>
        <button class="btn-tool">DTC Fallas</button>
        <button class="btn-tool">Diagramas</button>
        <button class="btn-tool">Mapeo DLC</button>
        <button class="btn-tool" style="border-color: var(--neon-green); color: var(--neon-green);">PRO PART DATE</button>
    </div>

    <div class="panel">
        <div id="main-display" style="text-align: center; border: 1px dashed #333; padding: 20px; color: #444;">
            SISTEMA LISTO - ESPERANDO SELECCIÓN
        </div>
        <div id="live-graph"></div>
    </div>

    <div class="panel">
        <h3 style="color: var(--neon-blue); margin-top: 0;">MONITOR DUAL</h3>
        <div class="metric-box"><small>APP1 (V)</small><div id="v1" style="font-size: 24px;">--.---</div></div>
        <div class="metric-box" style="border-color: var(--neon-blue);"><small>APP2 (V)</small><div id="v2" style="font-size: 24px;">--.---</div></div>
        
        <h3 style="color: var(--neon-green); margin-top: 20px;">LOG DE YULS</h3>
        <div class="console-log" id="log-yuls">> Conectado a central...</div>
    </div>
</div>

<script>
    const log = document.getElementById('log-yuls');

    function activateSystem() {
        document.getElementById('intro-screen').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('dashboard-ui').style.display = 'grid';
            log.innerHTML += "<br>> V-Link Inicializado en Golf A4.";
            initGraph();
        }, 800);
    }

    function initGraph() {
        Plotly.newPlot('live-graph', [{y:[], mode:'lines', name:'APP1', line:{color:'#39ff14'}}, {y:[], mode:'lines', name:'APP2', line:{color:'#00d4ff'}}], {
            paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)',
            font: {color: '#fff', size: 10}, margin: {t:10, b:20, l:30, r:10}
        });
    }

    function viewSensors() {
        log.innerHTML += "<br>> Leyendo datos en vivo...";
        setInterval(() => {
            let val1 = (Math.random() * 4).toFixed(3);
            let val2 = (val1 / 2).toFixed(3);
            document.getElementById('v1').innerText = val1 + " V";
            document.getElementById('v2').innerText = val2 + " V";
            Plotly.extendTraces('live-graph', {y: [[val1], [val2]]}, [0, 1]);
        }, 200);
    }

    function runTBA() {
        log.innerHTML += "<br>> Iniciando Calibración TBA...";
        document.getElementById('main-display').innerText = "ADAPTACIÓN EN PROCESO";
        document.getElementById('main-display').style.color = "var(--neon-pink)";
        viewSensors();
    }
</script>
</body>
</html>
