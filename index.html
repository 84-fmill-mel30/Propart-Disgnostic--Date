<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPART V12 | DIAGNOSTIC PREDICTIVO</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        :root {
            --neon-blue: #00d4ff;
            --neon-green: #39ff14;
            --neon-pink: #ff007f;
            --glass-bg: rgba(11, 14, 20, 0.85);
            --panel-border: rgba(0, 212, 255, 0.3);
        }

        body {
            background: radial-gradient(circle, #101820 0%, #000000 100%);
            color: #fff;
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* --- HEADER CORPORATIVO --- */
        header {
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 30px;
            border-bottom: 2px solid var(--neon-blue);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        .logo-box h1 { margin: 0; font-size: 24px; letter-spacing: 2px; color: var(--neon-blue); }
        .logo-box small { color: #888; text-transform: uppercase; font-size: 10px; }

        .status-bar { text-align: right; font-size: 12px; }
        .dot { height: 10px; width: 10px; background-color: #f00; border-radius: 50%; display: inline-block; margin-right: 5px; }

        /* --- LAYOUT PRINCIPAL --- */
        .dashboard {
            display: grid;
            grid-template-columns: 320px 1fr 380px;
            gap: 15px;
            padding: 15px;
            flex-grow: 1;
        }

        /* --- PANELES ESTILO GLASSMORPHISM --- */
        .panel {
            background: var(--glass-bg);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
            padding: 15px;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
        }

        /* --- BOTONES DE PODER --- */
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 12px 5px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
        }
        .btn:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 15px var(--neon-blue); }
        .btn-active { background: var(--neon-green); color: #000; border-color: var(--neon-green); }

        /* --- VISUALIZADOR CENTRAL --- */
        .canvas-container {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .engine-view {
            flex-grow: 1;
            background: url('https://via.placeholder.com/600x400/000000/00d4ff?text=MOTOR+3D+RENDER') center no-repeat;
            background-size: contain;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #live-graph { height: 250px; background: rgba(0,0,0,0.5); border-radius: 12px; }

        /* --- MONITOR DE DATOS --- */
        .data-card {
            background: rgba(0,0,0,0.6);
            border-left: 4px solid var(--neon-pink);
            padding: 15px;
            margin-bottom: 10px;
        }
        .data-label { font-size: 10px; color: #888; text-transform: uppercase; }
        .data-value { font-size: 28px; font-family: 'Courier New', monospace; color: #fff; }

        /* --- CONSOLA DE YULS --- */
        .console {
            background: #000;
            padding: 10px;
            font-family: monospace;
            font-size: 11px;
            color: var(--neon-green);
            height: 80px;
            overflow-y: auto;
            border: 1px solid #222;
        }
    </style>
</head>
<body>

<header>
    <div class="logo-box">
        <h1>PROPART <span style="color:#fff">V12</span></h1>
        <small>Base de Datos: PRO PART DATE | Socio: MILLAN</small>
    </div>
    <div class="status-bar">
        <span class="dot" id="vlink-dot"></span> <span id="vlink-text">V-LINK DISCONNECTED</span> | 
        <span style="color: var(--neon-green)">AES-256 ENCRYPTION ACTIVE</span>
    </div>
</header>

<div class="dashboard">
    <div class="panel">
        <h3 style="color: var(--neon-blue); font-size: 14px; margin-top: 0;">8 DE PODER</h3>
        <div class="btn-grid">
            <button class="btn" onclick="connectVLink()">Scanner V-Link</button>
            <button class="btn" onclick="startSincro()">Sincro CKP/CMP</button>
            <button class="btn" onclick="startTBA()">Calibrar TBA</button>
            <button class="btn">DTC Fallas</button>
            <button class="btn">Diagramas</button>
            <button class="btn">Mapeo DLC</button>
            <button class="btn">Pro Part Date</button>
            <button class="btn">Ajustes IA</button>
        </div>
        
        <h3 style="color: var(--neon-pink); font-size: 14px;">CÓDIGOS DE FALLA (DTC)</h3>
        <div style="font-size: 12px; color: #666;">
            <input type="checkbox" checked> P0121 - Sensor APP1<br>
            <input type="checkbox"> P0300 - Misfire Detected<br>
            <input type="checkbox"> P0507 - Idle Control High
        </div>

        <div style="margin-top: auto;">
            <button class="btn-active" style="width: 100%; padding: 15px; font-size: 18px; border:none; border-radius: 8px; cursor: pointer;">ONC</button>
        </div>
    </div>

    <div class="canvas-container">
        <div class="engine-view" id="main-view">
            <div id="render-msg" style="color: #444; font-weight: bold; text-align: center;">ESPERANDO COMANDO...</div>
        </div>
        <div id="live-graph"></div>
    </div>

    <div class="panel">
        <h3 style="color: var(--neon-blue); font-size: 14px; margin-top: 0;">MONITOR DUAL</h3>
        
        <div class="data-card">
            <div class="data-label">APP1 Sensor (Voltage)</div>
            <div class="data-value" id="val-app1">--.--- V</div>
        </div>

        <div class="data-card" style="border-color: var(--neon-blue);">
            <div class="data-label">APP2 Sensor (Voltage)</div>
            <div class="data-value" id="val-app2">--.--- V</div>
        </div>

        <div class="data-card" style="border-color: var(--neon-green);">
            <div class="data-label">RPM Motor / Inyector Pulse</div>
            <div class="data-value" id="val-rpm">0 RPM</div>
        </div>

        <h3 style="color: var(--neon-green); font-size: 14px;">LOG DE YULS</h3>
        <div class="console" id="yuls-log">
            > Sistema inicializado...<br>
            > Socio Millan, listo para la acción.
        </div>
    </div>
</div>

<script>
    const log = document.getElementById('yuls-log');
    
    // Función para conectar V-Link
    function connectVLink() {
        log.innerHTML += "<br>> Buscando Hardware V-Link...";
        setTimeout(() => {
            document.getElementById('vlink-dot').style.background = 'var(--neon-green)';
            document.getElementById('vlink-text').innerText = 'V-LINK CONNECTED (UID: VLNK-V12)';
            log.innerHTML += "<br>> V-Link Conectado en Pin 7 (K-Line).";
        }, 1000);
    }

    // Gráfica con Plotly
    function initGraph() {
        var trace1 = { y: [], mode: 'lines', name: 'APP1', line: {color: '#00d4ff'} };
        var trace2 = { y: [], mode: 'lines', name: 'APP2', line: {color: '#ff007f'} };
        var layout = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            font: {color: '#fff', size: 10},
            margin: {t: 20, b: 30, l: 40, r: 10},
            xaxis: {showgrid: false},
            yaxis: {gridcolor: '#222'}
        };
        Plotly.newPlot('live-graph', [trace1, trace2], layout);
    }

    // Acción de Calibración TBA
    function startTBA() {
        log.innerHTML += "<br>> Iniciando Calibración Cuerpo Aceleración...";
        document.getElementById('render-msg').innerText = "ADAPTACIÓN EN CURSO...";
        document.getElementById('render-msg').style.color = "var(--neon-pink)";
        
        let i = 0;
        let interval = setInterval(() => {
            let v1 = (Math.random() * (4.5 - 0.5) + 0.5).toFixed(3);
            let v2 = (Math.random() * (2.2 - 0.3) + 0.3).toFixed(3);
            document.getElementById('val-app1').innerText = v1 + " V";
            document.getElementById('val-app2').innerText = v2 + " V";
            
            Plotly.extendTraces('live-graph', { y: [[v1], [v2]] }, [0, 1]);
            
            i++;
            if (i > 30) {
                clearInterval(interval);
                document.getElementById('render-msg').innerText = "CALIBRACIÓN OK";
                document.getElementById('render-msg').style.color = "var(--neon-green)";
                log.innerHTML += "<br>> Adaptación finalizada. Datos guardados en PRO PART DATE.";
            }
        }, 100);
    }

    initGraph();
</script>

</body>
</html>
